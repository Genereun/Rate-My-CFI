<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pilot Training Reviews</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background: #f5f5f5;
  }
  h1 {
    text-align: center;
  }
  .section {
    margin-bottom: 40px;
    padding: 20px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  .item-list {
    list-style: none;
    padding: 0;
  }
  .item {
    padding: 10px;
    border-bottom: 1px solid #ddd;
  }
  .item:last-child {
    border-bottom: none;
  }
  .item h3 {
    margin: 0 0 5px;
  }
  .rating {
    color: #f39c12;
  }
  .comment {
    color: #555;
  }
  .form-group {
    margin-bottom: 10px;
  }
  label {
    display: block;
    margin-bottom: 5px;
  }
  input[type="text"],
  input[type="number"],
  textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
  }
  button {
    padding: 10px 15px;
    background: #3498db;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background: #2980b9;
  }
</style>
</head>
<body>
<h1>Pilot Training Reviews</h1>

<div id="sections-container">
  <!-- Sections will be generated here by JavaScript -->
</div>

<script>
  // Categories for reviews
  const categories = ['Schools', 'Instructors', 'DPES'];

  // Retrieve review data from local storage
  function getData() {
    const data = localStorage.getItem('pilotReviews');
    return data ? JSON.parse(data) : { 'Schools': [], 'Instructors': [], 'DPES': [] };
  }

  // Save review data to local storage
  function saveData(data) {
    localStorage.setItem('pilotReviews', JSON.stringify(data));
  }

  // Build a section (schools, instructors, DPEs)
  function createSection(category) {
    const section = document.createElement('div');
    section.className = 'section';
    section.innerHTML = `
      <h2>${category}</h2>
      <ul class="item-list" id="${category}-list"></ul>
      <h3>Add new ${category.slice(0, -1)}</h3>
      <div class="form-group">
        <label for="${category}-name">Name</label>
        <input type="text" id="${category}-name" placeholder="Enter ${category.slice(0, -1)} name" />
      </div>
      <div class="form-group">
        <label for="${category}-rating">Rating (1-5)</label>
        <input type="number" id="${category}-rating" min="1" max="5" />
      </div>
      <div class="form-group">
        <label for="${category}-comment">Comment</label>
        <textarea id="${category}-comment" rows="3" placeholder="Write a comment"></textarea>
      </div>
      <button onclick="addItem('${category}')">Add ${category.slice(0, -1)}</button>
    `;
    return section;
  }

  // Render all sections and their reviews
  function renderSections() {
    const container = document.getElementById('sections-container');
    container.innerHTML = '';
    categories.forEach(category => {
      container.appendChild(createSection(category));
    });
    renderItems();
  }

  // Render reviews for each category
  function renderItems() {
    const data = getData();
    categories.forEach(category => {
      const list = document.getElementById(category + '-list');
      list.innerHTML = '';
      data[category].forEach(item => {
        const li = document.createElement('li');
        li.className = 'item';
        li.innerHTML = `
          <h3>${item.name}</h3>
          <div class="rating">${'★'.repeat(item.rating)}${'☆'.repeat(5 - item.rating)}</div>
          <div class="comment">${item.comment}</div>
        `;
        list.appendChild(li);
      });
    });
  }

  // Add a new review
  function addItem(category) {
    const nameInput = document.getElementById(category + '-name');
    const ratingInput = document.getElementById(category + '-rating');
    const commentInput = document.getElementById(category + '-comment');
    const name = nameInput.value.trim();
    const rating = parseInt(ratingInput.value);
    const comment = commentInput.value.trim();

    // Basic validation
    if (!name || isNaN(rating) || rating < 1 || rating > 5) {
      alert('Please fill out a valid name and rating between 1 and 5.');
      return;
    }

    const data = getData();
    data[category].push({ name, rating, comment });
    saveData(data);

    // Clear form inputs
    nameInput.value = '';
    ratingInput.value = '';
    commentInput.value = '';

    // Refresh lists
    renderItems();
  }

  // Initialize the page
  document.addEventListener('DOMContentLoaded', renderSections);
</script>
</body>
</html>
